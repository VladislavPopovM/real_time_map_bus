# üöå –û–Ω–ª–∞–π–Ω-–∫–∞—Ä—Ç–∞ –¥–≤–∏–∂–µ–Ω–∏—è –∞–≤—Ç–æ–±—É—Å–æ–≤ üìç

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –ü—Ä–æ–µ–∫—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —É–ª—å—Ç—Ä–∞-–±—ã—Å—Ç—Ä—ã–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥ –Ω–∞ **Trio**, –±–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤ —Å—Ç–∏–ª–µ "Cyberpunk" –Ω–∞ **Svelte 5**. üöÄ

---

## üìÇ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
.
‚îú‚îÄ‚îÄ server/                  # ‚öôÔ∏è High-Performance Backend (Python + Trio)
‚îÇ   ‚îú‚îÄ‚îÄ routes/              # üõ£Ô∏è –ë–∞–∑–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ú–æ—Å–∫–≤—ã (595 JSON-—Ñ–∞–π–ª–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ server.py            # üñ•Ô∏è –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–ë–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª, Spatial Index)
‚îÇ   ‚îú‚îÄ‚îÄ fake_bus.py          # ü§ñ –ò–º–∏—Ç–∞—Ç–æ—Ä (Trio Channels, –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îÇ   ‚îú‚îÄ‚îÄ harmful_client.py    # üõ°Ô∏è –¢–µ—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: –ë—Ä–∞—É–∑–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ harmful_bus.py       # üõ°Ô∏è –¢–µ—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: –ê–≤—Ç–æ–±—É—Å
‚îÇ
‚îú‚îÄ‚îÄ frontend/                # üé® Reactive Frontend (Svelte 5 + Leaflet)
‚îÇ   ‚îú‚îÄ‚îÄ src/lib/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Map.svelte       # üñåÔ∏è –†–µ–Ω–¥–µ—Ä–µ—Ä (Game Loop, Canvas, –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ busStore.svelte.js # üì¶ –ë–∏–Ω–∞—Ä–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ index.html           # üè† –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ
‚îî‚îÄ‚îÄ README.md                # üìñ –í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –∑–¥–µ—Å—å (–ì–ª–∞–≤–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç)
```

---

## üß† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è ¬´–Ω–∞—á–∏–Ω–∫–∞¬ª (–¢–æ–Ω–∫–æ—Å—Ç–∏) ‚ú®

### 1. –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ üß†
*   **LERP (–õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è)**: –°–µ—Ä–≤–µ—Ä —à–ª–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑ –≤ 200–º—Å (5 –ì—Ü), –Ω–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –æ–±—ä–µ–∫—Ç—ã –¥–≤–∏–≥–∞—é—Ç—Å—è —Å —á–∞—Å—Ç–æ—Ç–æ–π **60 FPS**. –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–∞–º ¬´–¥–æ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç¬ª –ø–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏.
*   **Batch Rendering**: –ê–≤—Ç–æ–±—É—Å—ã –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ —Ü–≤–µ—Ç–∞–º –∏ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—é—Ç—Å—è –Ω–∞ **Canvas** –æ–¥–Ω–∏–º —Å–∏—Å—Ç–µ–º–Ω—ã–º –≤—ã–∑–æ–≤–æ–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å **20,000+ –æ–±—ä–µ–∫—Ç–æ–≤** –±–µ–∑ –ª–∞–≥–æ–≤.
*   **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π Zoom**: –¢–æ—á–∫–∏ ¬´–ø—Ä–∏–∫–ª–µ–µ–Ω—ã¬ª –∫ –∫–∞—Ä—Ç–µ. –ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ–Ω–∏ –Ω–µ –¥—Ä–æ–∂–∞—Ç, —Ç–∞–∫ –∫–∞–∫ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π Leaflet.

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –ü—Ä–æ—Ç–æ–∫–æ–ª—ã üõ†Ô∏è
*   **–ë–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª (Binary-over-WS)**: –í–º–µ—Å—Ç–æ —Ç—è–∂–µ–ª–æ–≥–æ JSON —Å–µ—Ä–≤–µ—Ä —à–ª–µ—Ç ¬´—Å—ã—Ä—ã–µ¬ª –º–∞—Å—Å–∏–≤—ã `Float32`. –†–∞–∑–º–µ—Ä –ø–∞–∫–µ—Ç–∞ —Å–Ω–∏–∂–µ–Ω –≤ **7 —Ä–∞–∑** (—Å 2 –ú–± –¥–æ 320 –ö–± –Ω–∞ 20–∫ –æ–±—ä–µ–∫—Ç–æ–≤).
*   **Spatial Indexing (–°–µ—Ç—á–∞—Ç—ã–π –∏–Ω–¥–µ–∫—Å)**: –ö–∞—Ä—Ç–∞ –ø–æ–¥–µ–ª–µ–Ω–∞ –Ω–∞ —è—á–µ–π–∫–∏. –°–µ—Ä–≤–µ—Ä —à–ª–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É —Ç–æ–ª—å–∫–æ —Ç–µ –∞–≤—Ç–æ–±—É—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ –≤–∏–¥–Ω—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ. –≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –≤ **100+ —Ä–∞–∑**.
*   **Trio Channels**: –ò–º–∏—Ç–∞—Ç–æ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç—ã—Å—è—á–∏ –∞–≤—Ç–æ–±—É—Å–æ–≤, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ–≥–æ 5‚Äì10 —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ), –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—è —Å–∏—Å—Ç–µ–º—É.

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
–í–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è: Python 3.11+, Node.js 18+ –∏ Yarn.

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë—ç–∫–µ–Ω–¥–∞ üêç
```bash
pip install -r server/requirements.txt
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞ üé®
```bash
cd frontend
yarn install
```

---

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ üñ•Ô∏è
```bash
python server/server.py -v
```
*   `--bus_port`: –ø–æ—Ä—Ç –¥–ª—è –∞–≤—Ç–æ–±—É—Å–æ–≤ (8080).
*   `--browser_port`: –ø–æ—Ä—Ç –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ (8000).

### 2. –ó–∞–ø—É—Å–∫ –∏–º–∏—Ç–∞—Ç–æ—Ä–∞ ü§ñ
```bash
# –ó–∞–ø—É—Å–∫ –Ω–∞ 20,000 –∞–≤—Ç–æ–±—É—Å–æ–≤ (–ø–æ 34 –Ω–∞ –∫–∞–∂–¥—ã–π –∏–∑ 595 –º–∞—Ä—à—Ä—É—Ç–æ–≤)
python server/fake_bus.py --buses_per_route 34
```
*   `--routes_number`: –ª–∏–º–∏—Ç –º–∞—Ä—à—Ä—É—Ç–æ–≤ (0 ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ).
*   `--refresh_timeout`: —á–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (0.1—Å - 0.5—Å).

### 3. –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ üé®
```bash
cd frontend
yarn dev
```
üëâ –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **`http://localhost:5173`**

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
*   **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –°—Ç–∞–±–∏–ª—å–Ω—ã–µ 60 FPS –ø—Ä–∏ 20,000 –æ–±—ä–µ–∫—Ç–∞—Ö.
*   **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ ¬´–∑–æ–º–±–∏-–∞–≤—Ç–æ–±—É—Å–æ–≤¬ª (trash collection) —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ –º–æ–ª—á–∞–Ω–∏—è.
*   **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö JSON-—Å–æ–æ–±—â–µ–Ω–∏–π.

---
**Status:** `READY FOR DEPLOY` | **Built with:** `Python Trio` & `Svelte 5` üöå‚ú®üèõÔ∏è
